-- PREMIUM HUB FINAL 2025 | Key: premiumhub | ZERO BUG
if not game:IsLoaded() then game.Loaded:Wait() end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Orion Library (100% work Nov 2025)
loadstring(game:HttpGet("https://raw.githubusercontent.com/OrionLibrary/Orion/main/source"))()

-- Remote Detection
local function getRemote(name, class)
    return ReplicatedStorage:FindFirstChild(name) and ReplicatedStorage[name].ClassName == class and ReplicatedStorage[name]
end

local TeleportDealerEvent = getRemote("TeleportDealerEvent", "RemoteEvent")
local OpenDealerEvent     = getRemote("OpenDealerEvent", "RemoteEvent")
local OpenDealerClient    = getRemote("OpenDealerClient", "RemoteEvent")
local GetDealerItems      = getRemote("GetDealerItems", "RemoteFunction")
local BuyCarEvent         = getRemote("BuyCarEvent", "RemoteEvent")
local ClaimBoxEvent       = getRemote("ClaimBoxEvent", "RemoteEvent")
local NotifyEvent         = getRemote("NotifyEvent", "RemoteEvent")

local function fire(r, ...) if r then pcall(r.FireServer, r, ...) end end
local function invoke(r, ...) if r then local s,v = pcall(r.InvokeServer, r, ...) return s and v end end

-- Koordinat Dealer 1-4 (dari kamu)
local DealerCoords = {
    Vector3.new(351.16, 8.19, -286.64),
    Vector3.new(940.53, 6.29, -474.83),
    Vector3.new(2470.92, 5.11, -550.10),
    Vector3.new(3083.91, 5.55, -546.16),
}

-- 8 Brand sesuai urutan kamu
local Brands = {"Premium", "SLM", "Toyota", "BMR", "Nissan", "Retro", "Mizada", "Hyundai"}

-- Dealer UI (Real Data + Bisa Beli Dari Mana Saja)
local DealerGUI
local function createDealerUI()
    DealerGUI = Instance.new("ScreenGui", PlayerGui)
    DealerGUI.Name = "PremiumDealerUI"; DealerGUI.ResetOnSpawn = false
    local Frame = Instance.new("Frame", DealerGUI)
    Frame.Size = UDim2.new(0, 760, 0, 480)
    Frame.Position = UDim2.new(0.5, -380, 0.5, -240)
    Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    Frame.BackgroundTransparency = 0.1
    Frame.BorderSizePixel = 0

    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1,0,0,50); Title.BackgroundTransparency = 1
    Title.Text = "Dealer"; Title.TextColor3 = Color3.new(1,1,1)
    Title.Font = Enum.Font.GothamBold; Title.TextSize = 28

    local List = Instance.new("ScrollingFrame", Frame)
    List.Name = "CarList"; List.Size = UDim2.new(1,-20,1,-70)
    List.Position = UDim2.new(0,10,0,60); List.CanvasSize = UDim2.new(0,0,0,0)
    List.AutomaticCanvasSize = Enum.AutomaticSize.Y; List.ScrollBarThickness = 6

    local Template = Instance.new("Frame", List)
    Template.Name = "CarTemplate"; Template.Size = UDim2.new(1,-10,0,90)
    Template.BackgroundTransparency = 0.3; Template.Visible = false

    local NameLabel = Instance.new("TextLabel", Template); NameLabel.Name = "Name"
    NameLabel.Size = UDim2.new(0.6,0,0.5,0); NameLabel.Position = UDim2.new(0,10,0,5)
    NameLabel.BackgroundTransparency = 1; NameLabel.TextXAlignment = Enum.TextXAlignment.Left
    NameLabel.Font = Enum.Font.GothamBold; NameLabel.TextSize = 20; NameLabel.TextColor3 = Color3.new(1,1,1)

    local PriceLabel = Instance.new("TextLabel", Template); PriceLabel.Name = "Price"
    PriceLabel.Size = UDim2.new(0.6,0,0.5,0); PriceLabel.Position = UDim2.new(0,10,0.5,0)
    PriceLabel.BackgroundTransparency = 1; PriceLabel.TextXAlignment = Enum.TextXAlignment.Left
    PriceLabel.Font = Enum.Font.Gotham; PriceLabel.TextSize = 18; PriceLabel.TextColor3 = Color3.fromRGB(0, 255, 0)

    local BuyBtn = Instance.new("TextButton", Template); BuyBtn.Name = "Buy"
    BuyBtn.Size = UDim2.new(0.25,0,0.7,0); BuyBtn.Position = UDim2.new(0.7,0,0.15,0)
    BuyBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255); BuyBtn.Text = "BUY"
    BuyBtn.Font = Enum.Font.GothamBold; BuyBtn.TextColor3 = Color3.new(1,1,1); BuyBtn.TextSize = 18
end
createDealerUI()

-- Update Dealer UI (real data)
if OpenDealerClient then
    OpenDealerClient.OnClientEvent:Connect(function(brand)
        DealerGUI.Enabled = true
        DealerGUI.Frame.TextLabel.Text = brand .. " Dealership"
        for _,v in DealerGUI.Frame.CarList:GetChildren() do
            if v:IsA("Frame") and v.Name ~= "CarTemplate" then v:Destroy() end
        end
        local cars = invoke(GetDealerItems, brand) or {}
        for i, car in ipairs(cars) do
            local item = DealerGUI.Frame.CarList.CarTemplate:Clone()
            item.Visible = true; item.Parent = DealerGUI.Frame.CarList
            item.Name.Text = car.Name
            item.Price.Text = "$" .. tostring(car.Price):reverse():gsub("(%d%d%d)", "%1,"):reverse():gsub("^,", "")
            item.Buy.MouseButton1Click:Connect(function()
                fire(BuyCarEvent, brand, car.Id)
                OrionLib:MakeNotification({Name="Purchased", Content=car.Name .. " berhasil dibeli!", Time=4})
            end)
        end
    end)
end

if NotifyEvent then
    NotifyEvent.OnClientEvent:Connect(function(t,m)
        OrionLib:MakeNotification({Name=tostring(t), Content=tostring(m), Time=5})
    end)
end

-- KEY SYSTEM + FULL UI
OrionLib:InitKeySystem({
    Title = "Premium Hub",
    Description = "Key: premiumhub",
    Key = "premiumhub",
    SaveKey = true,
    Callback = function()
        OrionLib:MakeNotification({Name="Success", Content="Premium Hub Loaded!", Time=5})

        local Window = OrionLib:MakeWindow({Name="PremiumHub", SaveConfig=true, ConfigFolder="PremiumHub"})

        local selectedBrand = "Premium"
        local selectedDealer = 1

        -- Main Tab
        local Main = Window:MakeTab({Name="Main"})
        Main:AddTextbox({Name="Webhook URL", Callback=function() end})
        Main:AddToggle({Name="AutoFarm", Callback=function() end})
        Main:AddButton({Name="Stop Farm", Callback=function() end})
        Main:AddButton({Name="Destroy GUI", Callback=function() OrionLib:Destroy() end})

        -- Stats Tab (real-time 1 detik)
        local Stats = Window:MakeTab({Name="Stats"})
        local moneyLabel = Stats:AddLabel("Money: Loading...")
        local carsLabel = Stats:AddLabel("Cars Owned: 0")
        local sessionLabel = Stats:AddLabel("Session: 00:00")
        local pingLabel = Stats:AddLabel("Ping: 0ms")
        spawn(function()
            local start = tick()
            while wait(1) do
                moneyLabel:Text("Money: $" .. (LocalPlayer:FindFirstChild("leaderstats") and LocalPlayer.leaderstats.Cash.Value or "N/A"))
                carsLabel:Text("Cars Owned: " .. #LocalPlayer:FindFirstChild("Cars") or 0)
                sessionLabel:Text("Session: " .. string.format("%02d:%02d", math.floor((tick()-start)/60), math.floor((tick()-start)%60)))
                pingLabel:Text("Ping: " .. game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString())
            end
        end)

        -- Configuration
        local Config = Window:MakeTab({Name="Configuration"})
        Config:AddSlider({Name="TP Delay", Min=1, Max=30, Default=3, Increment=1, Callback=function() end})

        -- Box
        local Box = Window:MakeTab({Name="Box"})
        Box:AddButton({Name="Daily Box", Callback=function() fire(ClaimBoxEvent,"Daily") end})
        Box:AddButton({Name="Limited Box", Callback=function() fire(ClaimBoxEvent,"Limited") end})
        Box:AddButton({Name="Gamepass Box", Callback=function() fire(ClaimBoxEvent,"Gamepass") end})

        -- Dealership (8 Brand + TP + Open dari mana saja)
        local Dealer = Window:MakeTab({Name="Dealership"})
        Dealer:AddDropdown({Name="Brand", Options=Brands, Callback=function(v) selectedBrand = v end})
        Dealer:AddDropdown({Name="Dealer", Options={"Dealer 1","Dealer 2","Dealer 3","Dealer 4"}, Callback=function(v) selectedDealer = tonumber(v:match("%d+")) end})
        Dealer:AddButton({Name="Teleport to Dealer", Callback=function()
            if TeleportDealerEvent then
                fire(TeleportDealerEvent, selectedDealer)
            else
                LocalPlayer.Character:PivotTo(CFrame.new(DealerCoords[selectedDealer]))
            end
        end})
        Dealer:AddButton({Name="Open Dealer (Beli dari Mana Saja)", Callback=function()
            fire(OpenDealerEvent, selectedBrand)
        end})
    end
})
