-- Premium Hub (Kavo Fixed & Stable - Key: premiumhub)
if not game:IsLoaded() then game.Loaded:Wait() end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Kavo UI yang PASTI work 100% November 2025
loadstring(game:HttpGet("https://raw.githubusercontent.com/RETZONN/Kavo-UI/main/Source.lua"))()

local Kavo = getgenv().Kavo

local Window = Kavo.CreateWindow({
    Title = "Premium Hub",
    Folder = "PremiumHubConfig",
    Theme = "Dark"
})

-- Semua remote & function (sama persis)
local function getRemote(n,c,t) local o=pcall(function()return ReplicatedStorage:WaitForChild(n,t or 5)end) return o and ReplicatedStorage:FindFirstChild(n) and ReplicatedStorage[n].ClassName==c and ReplicatedStorage[n] end

local TeleportDealerEvent = getRemote("TeleportDealerEvent","RemoteEvent")
local OpenDealerEvent     = getRemote("OpenDealerEvent","RemoteEvent")
local OpenDealerClient    = getRemote("OpenDealerClient","RemoteEvent")
local GetDealerItems      = getRemote("GetDealerItems","RemoteFunction")
local BuyCarEvent         = getRemote("BuyCarEvent","RemoteEvent")
local ClaimBoxEvent       = getRemote("ClaimBoxEvent","RemoteEvent")
local NotifyEvent         = getRemote("NotifyEvent","RemoteEvent")

local function safeFire(r,...) if r then pcall(r.FireServer,r,...) end end
local function safeInvoke(r,...) if r then local s,v=pcall(r.InvokeServer,r,...) return s and v end end

local DealerTP = {
    Vector3.new(351.16,8.19,-286.64),
    Vector3.new(940.53,6.29,-474.83),
    Vector3.new(2470.92,5.11,-550.10),
    Vector3.new(3083.91,5.55,-546.16),
}

-- Dealer UI sama
local function dealerUI()
    local s=Instance.new("ScreenGui",PlayerGui) s.Name="DealerUI" s.ResetOnSpawn=false
    local f=Instance.new("Frame",s) f.Name="MainFrame" f.AnchorPoint=Vector2.new(.5,.5) f.Position=UDim2.new(.5,0,.5,0)
    f.Size=UDim2.new(0,720,0,420) f.BackgroundTransparency=.15 f.BackgroundColor3=Color3.fromRGB(30,30,30)
    local t=Instance.new("TextLabel",f) t.Name="Title" t.Size=UDim2.new(1,0,0,40) t.BackgroundTransparency=1 t.Font=Enum.Font.SourceSansBold t.TextSize=22 t.TextColor3=Color3.new(1,1,1) t.Text="Dealer"
    local list=Instance.new("ScrollingFrame",f) list.Name="List" list.Size=UDim2.new(1,-20,1,-60) list.Position=UDim2.new(0,10,0,45) list.AutomaticCanvasSize=Enum.AutomaticSize.Y list.ScrollBarThickness=8
    local template=Instance.new("Frame",list) template.Name="TemplateItem" template.Size=UDim2.new(1,-10,0,80) template.Visible=false template.BackgroundTransparency=.25
    Instance.new("TextLabel",template).Name="CarName"
    Instance.new("TextLabel",template).Name="Price"
    local b=Instance.new("TextButton",template) b.Name="BuyButton" b.Size=UDim2.new(.12,-10,.8,-10) b.Position=UDim2.new(.86,0,.1,0) b.Text="Buy"
    return s
end
local GUI

if NotifyEvent then NotifyEvent.OnClientEvent:Connect(function(t,m) Kavo:Notify({Title=tostring(t),Content=tostring(m),Duration=4}) end) end
if OpenDealerClient then
    OpenDealerClient.OnClientEvent:Connect(function(name)
        GUI=GUI or dealerUI() GUI.Enabled=true
        local f=GUI.MainFrame f.Title.Text=name.." Dealer"
        for _,v in f.List:GetChildren() do if v:IsA("Frame") and v.Name~="TemplateItem" then v:Destroy() end end
        local items=safeInvoke(GetDealerItems,name)
        for i,v in ipairs(items or {}) do
            local c=f.List.TemplateItem:Clone() c.Visible=true c.Name="Item"..i c.Parent=f.List
            c.CarName.Text=v.Name c.Price.Text="$"..v.Price
            c.BuyButton.MouseButton1Click:Connect(function() safeFire(BuyCarEvent,name,v.Id) end)
        end
    end)
end

-- Key System (premiumhub)
Kavo:KeySystem({
    Title = "Premium Hub",
    Description = "Key: premiumhub",
    Key = "premiumhub",
    SaveKey = true,
    Callback = function()
        Kavo:Notify({Title="Success",Content="Premium Hub Loaded!",Duration=5})

        local dealer,tele,af,tpTime = "Premium",1,false,3

        local Main = Window:NewTab("Main")
        Main:NewTextbox("Webhook", function(t) webhook=t end)
        Main:NewToggle("AutoFarm", function(v) af=v end)
        Main:NewButton("Stop Farm", function() af=false end)

        local Stats = Window:NewTab("Stats")
        Stats:NewLabel("Status: Idle")
        Stats:NewLabel("Money: $0")

        local Config = Window:NewTab("Config")
        Config:NewSlider("TP Time", 1,30,3, function(v) tpTime=v end)

        local Box = Window:NewTab("Box")
        Box:NewButton("Daily Box", function() safeFire(ClaimBoxEvent,"Daily") end)
        Box:NewButton("Limited Box", function() safeFire(ClaimBoxEvent,"Limited") end)
        Box:NewButton("Gamepass Box", function() safeFire(ClaimBoxEvent,"Gamepass") end)

        local D = Window:NewTab("Dealership")
        D:NewDropdown("Brand", {"Premium","SLM","Toyota","BMR","Nissan","Retro","Mizada","Hyundai"}, function(v) dealer=v end)
        D:NewDropdown("Dealer", {"Dealer 1","Dealer 2","Dealer 3","Dealer 4"}, function(v) tele=tonumber(v:match("%d+")) end)
        D:NewButton("TP Dealer", function()
            if TeleportDealerEvent then safeFire(TeleportDealerEvent,tele)
            else local c=LocalPlayer.Character if c then c:PivotTo(CFrame.new(DealerTP[tele])) end end
        end)
        D:NewButton("Open Dealer", function() safeFire(OpenDealerEvent,dealer) end)
        D:NewButton("Buy Car (UI)", function() Kavo:Notify({Title="Info",Content="Buka dealer dulu lalu klik Buy di UI dealer",Duration=6}) end)
    end
})
